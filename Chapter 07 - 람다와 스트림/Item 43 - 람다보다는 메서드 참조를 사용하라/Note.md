# 람다보다는 메서드 참조를 사용하라

> 작성자: 캐슬

## 목차
1. 메서드 참조
2. 람다보다 간결한 메서드 참조
3. 람다의 좋은 점
4. 메서드 참조 특징
5. 어떤 상황에서 람다를 메서드 참조로 변경해야 하는가?
6. 메서드 참조의 유형
7. 핵심 정리

## 메서드 참조?

---

람다 표현식이 단 하나만의 메서드를 호출하는 경우에 해당 람다 표현식에서 불필요한 매개변수를 제거하고 사용할 수 있도록 해준다.

## 람다보다 간결한 메서드 참조

---

람다가 익명 클래스보다 나은 점 중 가장 큰 특징은 간결함이다.

자바에서는 메서드 참조(method reference)를 이용해 람다보다도 더 간결하게 만들 수 있다.

```java
map.merge(key, 1, (count, incr) -> count + incr);
```

> 이 코드는 키 , 값, 함수를 인수로 받으며, 주어진 키가 맵 안에 아직 없다면 주어진 쌍을 그대로 저장한다. 키가 있다면 함수를 현재 값과 주어진 값에 적용한 다음, 그 결과로 현재를 덮어쓴다.(맵에 {키, 함수의 결과} 쌍을 저장한다.
>

위 코드에서 count와 incr은 단순히 두 인수의 합을 반환할 뿐인데 공간을 꽤 차지한다.

자바 8부터 Integer 클래스는 람다와 기능이 같은 정적 메서드 sum을 제공한다. 따라서 람다 대신 이 메서드의 참조를 전달하면 똑같은 결과를 더 보기 좋게 얻을 수 있다.

```java
map.merge(key, 1, Integer::sum);
```

매개 변수가 늘어날수록 메서드 참조로 제거할 수 있는 코드양도 늘어난다.

## 람다의 좋은 점

---

- 람다의 매개변수 이름 자체가 프로그래머에게 좋은 가이드가 된다.
- 람다의 길이가 더 길지만 메서드 참조보다 읽기 쉽고 유지보수도 쉬울 수 있다.

## 메서드 참조

---

- 람다로 할 수 없는 일이면 메서드 참조로도 할 수 없다.
- 메서드 참조를 사용하는 편이 보통 더 짧고 간결하다.
- 람다로 작성할 코드를 새로운 메서드에 담은 다음, 람다 대신 해당 메서드 참조를 사용하는 방식이다.

## 어떤 상황에서 람다를 메서드 참조로 변경해야 하는가?

---

보통은 람다를 메서드 참조로 대체하는 것이 이득이지만 항상 그런 것은 아니다.

### 람다가 유리한 경우

- 주로 메서드와 람다가 같은 클래스에 있을 때

  EX_

    ```java
    class GoshThisClassnameIsHumongous {
    	...
    	// 메서드 참조
    	service.excute(GoshThisClassnameIsHumongous::action);
    	
    	// 람다로 대체
    	service.excute(() -> action());
    ```

  > 메서드 참조 쪽이 더 명확하지도 더 짧지도 않다. 따라서 람다가 더 낫다.


- java.util.function 패키지가 제공하는 제네릭 정적 팩터리 메서드인 Function.identity()를 사용하기보다는 똑같은 성능의 람다 (x→x)를 직접 상요하는 편이 코드도 짧고 명확하다.

## 메서드 참조의 유형

---

### 정적 참조

### 인스턴스 메서드를 참조하는 유형 두가지

- **수신 객체를 특정하는 한정적 인스턴스 매서드 참조** (함수 객체가 받는 인수와 참조되는 메서드가 받는 인수가 같다.)
- **수신 객체를 특정하지 않는 비한정적 인스턴스 메서드 참조** (함수 객체를 적용하는 시점에 수신 객체를 알려준다.) → 주로 스트림 파이프라인에서의 매핑과 필터 함수에 사용된다.

### 클래스 생성자를 가르키는 메서드 참조

### 배열 생성자를 가르키는 매서드 참조

| 메서드 참조 유형  | 예 | 같은 기능을 하는 람다                                          |
|------------| --- |-------------------------------------------------------|
| 정적         | Integer::parseInt | str → Integer.parseInt(str)                           |
| 한정적(인스턴스)  | Instant.now()::isAfter | Instant then = Intsant.now() <br> t → then.isAfter(t) |
| 비한정적(인스턴스) | String::toLowerCase | str → str.toLowerCase()                               |
| 클래스 생성자    | TreeMap<K, V>::new | () → newTreeMap<K, V>()                               |
| 배열 생성자     | int[]::new | len → new int[len]                                    |


## 핵심 정리

---

>메서드 참조는 람다의 간단 명료한 대안이 될 수 있다. <br>
메서드 참조 쪽이 좀 더 짧고 명확하다면 메서드 참조를 사용하고, 그렇지 않을 때만 람다를 사용하라
>