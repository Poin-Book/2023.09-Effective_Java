# ë°˜í™˜ íƒ€ì…ìœ¼ë¡œëŠ” ìŠ¤íŠ¸ë¦¼ë³´ë‹¤ ì»¬ë ‰ì…˜ì´ ë‚«ë‹¤

> ì‘ì„±ì: ì›Œë‹ˆ

## ëª©ì°¨
**1. ë°˜ë³µì„ ì§€ì›í•˜ì§€ ì•ŠëŠ” Stream**  
**2. Streamê³¼ Iterable ê°„ì˜ í˜¸í™˜ì„±ì„ ê³ ë ¤í•˜ì**  
**3. ê³µê°œ APIì—ì„œì˜ Collection ë°˜í™˜**  
**4. ì „ìš© ì»¬ë ‰ì…˜ êµ¬í˜„ì„ ê³ ë ¤í•˜ë¼**  
**5. ìš”ì•½**

---

> ### Java 8 ë“±ì¥

- **Java 8 ì´ì „**ê¹Œì§€ëŠ” Streamì´ ì—†ì—ˆê¸° ë•Œë¬¸ì— ì›ì†Œ ì‹œí€€ìŠ¤(ì¼ë ¨ì˜ ì›ì†Œ)ë¥¼ ë°˜í™˜í•˜ëŠ” ë©”ì„œë“œëŠ” ë³´í†µ ì»¬ë ‰ì…˜ ì¸í„°í˜ì´ìŠ¤ë‚˜ Iterable, ë°°ì—´ì„ ì‚¬ìš©í•˜ê³¤ í–ˆëŠ”ë°,  
- **Java 8 ì´í›„** Streamì´ ë“±ì¥í•˜ë©° ê³ ë ¤í•´ì•¼ í•  ë¶€ë¶„ë“¤ì´ ìƒê²¨ë‚¬ë‹¤. 

---

### ë°˜ë³µì„ ì§€ì›í•˜ì§€ ì•ŠëŠ” Stream
ìŠ¤íŠ¸ë¦¼ì€ ë°˜ë³µ(iteration)ì„ ì§€ì›í•˜ì§€ ì•ŠëŠ”ë‹¤.  

##### for-eachë¥¼ í™œìš©í•  ìˆ˜ ì—†ëŠ” Stream
![image](https://github.com/kiwijomn/test-repo/assets/116738827/ad1eeb14-925e-453c-b19a-7bfa7622e842)

##### â¡ï¸ ë©”ì„œë“œ ì°¸ì¡°ë¥¼ ë§¤ê°œë³€ìˆ˜í™”ëœ Iterableë¡œ ì ì ˆíˆ í˜•ë³€í™˜ í•´ì£¼ê¸°
![image](https://github.com/kiwijomn/test-repo/assets/116738827/b3bd709e-2eed-4f99-b837-47e69ab45fd9)

##### BaseStream interface
``` java
public interface BaseStream<T, S extends BaseStream<T, S>>
        extends AutoCloseable {
    /**
     * Returns an iterator for the elements of this stream.
     *
     * <p>This is a <a href="package-summary.html#StreamOps">terminal
     * operation</a>.
     *
     * @return the element iterator for this stream
     */
    Iterator<T> iterator();

		...
```

Stream ì¸í„°í˜ì´ìŠ¤ëŠ” Iterable ì¸í„°í˜ì´ìŠ¤ê°€ ì •ì˜í•œ ì¶”ìƒ ë©”ì„œë“œë¥¼ ì „ë¶€ í¬í•¨í•˜ê³  Iterable ì¸í„°í˜ì´ìŠ¤ê°€ ì •ì˜í•œ ë°©ì‹ëŒ€ë¡œ ë™ì‘í•œë‹¤.  
í•˜ì§€ë§Œ Streamê³¼ Streamì˜ ìƒìœ„ ê°ì²´ì¸ BaseStream ëª¨ë‘ Iterableì„ extends í•˜ì§€ ì•Šìœ¼ë¯€ë¡œ for-eachë¡œ streamì„ ë°˜ë³µí•  ìˆ˜ ì—†ë‹¤.
</br>

---

### Streamê³¼ Iterable ê°„ì˜ í˜¸í™˜ì„±ì„ ê³ ë ¤í•˜ì
Streamì„ ë°˜ë³µí•˜ê¸° ìœ„í•´ì„œ ì œê³µë˜ëŠ” ìš°íšŒë¡œëŠ” ì ì ˆí•œ ê²ƒì´ ì—†ë‹¤.  

##### íƒ€ì…ì„ ì¤‘ê°œí•´ì£¼ëŠ” ì–´ëŒ‘í„° ë©”ì„œë“œ
``` java
public static <E> Iterable<E> iterableOf(Stream<E> stream) {
	return stream::iterator;
}
```
``` java
public class Test {
  public static void main(String[] args) {
    Stream<String> fruits = Stream.of("ì‚¬ê³¼", "ë°”ë‚˜ë‚˜", "ê·¤");

    for (String fruit : iterableOf(fruits)) { // ì–´ëŒ‘í„° ë©”ì†Œë“œ ì‚¬ìš©
      System.out.println(fruit);
    }
  }
}
```

ì´ë ‡ê²Œ ì–´ëŒ‘í„°ë¥¼ ì‚¬ìš©í•´ì„œ ë°˜ë³µí•  ìˆ˜ ìˆì§€ë§Œ, ì´ì™•ì´ë©´ ì´ëŸ° ì–´ëŒ‘í„°ë¥¼ êµ¬í˜„í•˜ì§€ ì•ŠëŠ” ê²ƒì´ ë¹„ìš©ì ìœ¼ë¡œ ë” ì ˆì•½ë  ê²ƒì´ë‹¤. 

---

### ê³µê°œ APIì—ì„œì˜ Collection ë°˜í™˜
- í•´ë‹¹ ë©”ì„œë“œê°€ ì˜¤ì§ stream pipe lineì—ì„œë§Œ ì“°ì´ëŠ” ê±¸ ì•ˆë‹¤ë©´, streamì„ ë°˜í™˜í•´ì£¼ê³ 
- ë°˜í™˜ëœ ê°ì²´ë“¤ì´ ë°˜ë³µë¬¸ì—ì„œë§Œ ì“°ì¼ ê±¸ ì•Œë©´, Iterableì„ ë°˜í™˜í•˜ë©´ ëœë‹¤.

í•˜ì§€ë§Œ ê³µê°œ APIì˜ ê²½ìš°, stream pipe lineì„ ì‚¬ìš©í•˜ë ¤ëŠ” ì‚¬ìš©ìì™€ ë°˜ë³µë¬¸ì„ ì‚¬ìš©í•˜ë ¤ëŠ” ì‚¬ìš©ì ë‘˜ ë‹¤ ë°°ë ¤í•´ì•¼ í•œë‹¤.

##### Collection interface
``` java
public interface Collection<E> extends Iterable<E> {
	...
	default Stream<E> stream() {
        return StreamSupport.stream(spliterator(), false);
  }
}
```

â¡ï¸ Collection ì¸í„°í˜ì´ìŠ¤ëŠ” Iterableì˜ í•˜ìœ„ íƒ€ì…ì´ê³  stream ë©”ì„œë“œë„ ì œê³µí•œë‹¤. ì¦‰, ë°˜ë³µê³¼ streamì„ ë™ì‹œ ì§€ì›í•œë‹¤.  
ë”°ë¼ì„œ ì›ì†Œ ì‹œí€€ìŠ¤ë¥¼ ë°˜í™˜í•˜ëŠ” ê³µê°œ APIì˜ ë°˜í™˜ íƒ€ì…ì—ëŠ” Collectionì´ë‚˜ ê·¸ í•˜ìœ„ íƒ€ì…ì„ ì“°ëŠ” ê²Œ ì¼ë°˜ì ìœ¼ë¡œ ìµœì„ ì´ë‹¤.

---

### ì „ìš© ì»¬ë ‰ì…˜ êµ¬í˜„ì„ ê³ ë ¤í•˜ë¼
ë°ì´í„°ê°€ ì¶©ë¶„íˆ ì ë‹¤ë©´ í‘œì¤€ ì»¬ë ‰ì…˜ êµ¬í˜„ì²´(ex: ArrayList, HashSet)ë¥¼ ì‚¬ìš©í•´ë„ ë˜ì§€ë§Œ, 
ê·¸ê²Œ ì•„ë‹ˆë¼ë©´ ì „ìš© ì»¬ë ‰ì…˜ì„ êµ¬í˜„í•˜ëŠ” ê²ƒì„ ê³ ë ¤í•  ìˆ˜ ìˆë‹¤.  
_(ë‹¨ì§€ collectionì„ ë°˜í™˜í•œë‹¤ëŠ” ì´ìœ ë¡œ ë©ì¹˜ í° ì‹œí€€ìŠ¤ë¥¼ ë©”ëª¨ë¦¬ì— ì˜¬ë ¤ì„œëŠ” ì•ˆ ëœë‹¤.)_

ë©±ì§‘í•©ì€ ì›ì†Œì˜ ê°œìˆ˜ê°€ nê°œì¼ ë•Œ 2^nê°œê°€ ëœë‹¤ëŠ” ì ì„ ì•Œê³  ìˆê¸°ì— AbstractListë¥¼ ì´ìš©í•´ íš¨ìœ¨ì„±ì„ ë†’ì¸ ì „ìš© ì»¬ë ‰ì…˜ì„ ë°˜í™˜í•  ìˆ˜ ìˆë‹¤. 

##### ì…ë ¥ ì§‘í•©ì˜ ë©±ì§‘í•©ì„ ì „ìš© ì»¬ë ‰ì…˜ì— ë‹´ì•„ ë°˜í™˜
> - ë©±ì§‘í•©: í•œ ì§‘í•©ì˜ ëª¨ë“  ë¶€ë¶„ì§‘í•©ì„ ì›ì†Œë¡œ í•˜ëŠ” ì§‘í•©ìœ¼ë¡œ, ì›ì†Œì˜ ê°œìˆ˜ê°€ nê°œì¼ ë•Œ 2^nê°œê°€ ëœë‹¤.  
> - {a, b, c}ì˜ ë©±ì§‘í•© : {{a}, {b}, {c}, {a, b}, {a, c}, {b, c}, {a, b, c}}

``` java
public class PowerSet {
    public static final <E> Collection<Set<E>> of(Set<E> s) {
       List<E> src = new ArrayList<>(s);
       if(src.size() > 30) { // (1)
           throw new IllegalArgumentException("ì§‘í•©ì— ì›ì†Œê°€ ë„ˆë¬´ ë§ìŠµë‹ˆë‹¤.(ìµœëŒ€ 30ê°œ): " + s);
       }

       return new AbstractList<Set<E>>() {
           @Override
           public int size() {
               return 1 << src.size();
           }

           @Override
           public boolean contains(Object o) {
               return o instanceof Set && src.containsAll((Set) o);
           }

           @Override
           public Set<E> get(int index) {
               Set<E> result = new HashSet<>();
               for (int i = 0; index != 0; i++, index >>= 1) { // (2) 
                   if((index & 1) == 1) {
                       result.add(src.get(i));
                   }
               }
               return result;
           }
       };
    }
}
```

- (1) size() ë©”ì„œë“œì˜ ë¦¬í„´ íƒ€ì…ì€ `int`ì´ë¯€ë¡œ ìµœëŒ€ ê¸¸ì´ê°€ `2^31 - 1` ë˜ëŠ” `Integer.Max_Value`ë¡œ ì œí•œë˜ê¸°ì— ì…ë ¥ ì§‘í•©ì˜ ì›ì†Œ ìˆ˜ê°€ 30ì„ ë„˜ìœ¼ë©´ ì˜ˆì™¸ë¥¼ ë˜ì§„ë‹¤.
- (2) ì›ì†Œì˜ ì¸ë±ìŠ¤ë¥¼ ë¹„íŠ¸ ë°±í„°ë¡œ ì‚¬ìš©í•˜ê¸° ë•Œë¬¸ì—, ë©”ëª¨ë¦¬ì— ê±°ëŒ€í•œ ì»¬ë ‰ì…˜ì„ ì˜¬ë¦¬ì§€ ì•Šê³  íš¨ìœ¨ì ìœ¼ë¡œ ì‚¬ìš©ì´ ê°€ëŠ¥í•˜ë‹¤.
- AbstractCollectionì„ í™œìš©í•˜ì—¬ Collection êµ¬í˜„ì²´ë¥¼ ë¦¬í„´í•  ë•ŒëŠ” Iteratorìš© ë©”ì„œë“œ ì™¸ì— containsì™€ size ë©”ì„œë“œë§Œ ë” êµ¬í˜„í•˜ë©´ ëœë‹¤.
- í•˜ì§€ë§Œ containsì™€ sizeë¥¼ êµ¬í˜„í•  ìˆ˜ ì—†ëŠ” ê²½ìš°ì—ëŠ”, Collectionë³´ë‹¤ëŠ” Stream, Iterableì„ ë°˜í™˜í•˜ëŠ” ê²ƒì´ ë‚«ë‹¤.

---

ğŸ“Œ ìš”ì•½
- Stream APIëŠ” Iterable ì¸í„°í˜ì´ìŠ¤ê°€ ì •ì˜í•œ ì¶”ìƒ ë©”ì„œë“œë¥¼ ëª¨ë‘ í¬í•¨í•˜ê³  í•´ë‹¹ ì¸í„°í˜ì´ìŠ¤ê°€ ì •ì˜í•œ ë°©ì‹ëŒ€ë¡œ ë™ì‘í•˜ì§€ë§Œ, Iterableì„ extends í•˜ì§€ëŠ” ì•Šì•˜ë‹¤. 
- ì›ì†Œ ì‹œí€€ìŠ¤ë¥¼ ë°˜í™˜í•˜ëŠ” APIë¥¼ ì •ì˜í•  ë•Œ ìŠ¤íŠ¸ë¦¼ìœ¼ë¡œ ì²˜ë¦¬í•˜ê¸°ë¥¼ ì›í•˜ëŠ” ì‚¬ìš©ìì™€ ë°˜ë³µìœ¼ë¡œ ì²˜ë¦¬í•˜ê¸¸ ì›í•˜ëŠ” ì‚¬ìš©ì ëª¨ë‘ë¥¼ ìœ„í•´ì„œ, ì–‘ìª½ì„ ë‹¤ ë§Œì¡±ì‹œí‚¤ë ¤ ë…¸ë ¥í•˜ì.
- Collection ì¸í„°í˜ì´ìŠ¤ëŠ” Iterableì˜ í•˜ìœ„ íƒ€ì…ì´ë©´ì„œ stream ë©”ì„œë“œë„ ì œê³µí•˜ë¯€ë¡œ ë°˜ë³µê³¼ ìŠ¤íŠ¸ë¦¼ì„ ë™ì‹œ ì§€ì›í•œë‹¤.  
  ê·¸ëŸ¬ë‹ˆ ì›ì†Œ ì‹œí€€ìŠ¤ë¥¼ ë°˜í™˜í•˜ëŠ” ê³µê°œ APIëŠ” Collection(í˜¹ì€ ê·¸ í•˜ìœ„ ê°ì²´)ì„ ì‚¬ìš©í•˜ëŠ”ê²Œ ì¢‹ë‹¤. 
- ë°˜í™˜ ì „ë¶€í„° ì´ë¯¸ ì›ì†Œë“¤ì„ ì»¬ë ‰ì…˜ìœ¼ë¡œ ê´€ë¦¬í•˜ê³  ìˆê±° ì›ì†Œì˜ ìˆ˜ê°€ ì ë‹¤ë©´, í‘œì¤€ ì»¬ë ‰ì…˜(ex: ArrayList)ì— ë‹´ì•„ ë°˜í™˜í•˜ì.
- ê·¸ë ‡ì§€ ì•Šë‹¤ë©´, ì „ìš© ì»¬ë ‰ì…˜ì„ êµ¬í˜„í• ì§€ ê³ ë¯¼í•˜ì. (ex: ë©±ì§‘í•©)
- ì»¬ë ‰ì…˜ì„ ë°˜í™˜í•  ìˆ˜ ì—†ë‹¤ë©´ Streamê³¼ Iterable ì¤‘ ìì—°ìŠ¤ëŸ¬ìš´ ê²ƒì„ ë°˜í™˜í•˜ì. 
