# ëª…ëª… íŒ¨í„´ë³´ë‹¤ ì• ë„ˆí…Œì´ì…˜ì„ ì‚¬ìš©í•˜ë¼

> ì‘ì„±ì: {ë°€ë¦¬}

## ëª©ì°¨

### ëª…ëª… íŒ¨í„´ì˜ ë‹¨ì 
#### 1. ì˜¤íƒ€ê°€ ë‚˜ë©´ ì•ˆ ëœë‹¤.
ë§Œì•½ testë¡œ ì‹œì‘ë˜ì–´ì•¼ í•  ë©”ì„œë“œ ì´ë¦„ì´ ì˜¤íƒ€ë¡œ ì¸í•´ tsetë¡œ ì‘ì„±ë˜ì—ˆë‹¤ë©´, ëª…ëª… íŒ¨í„´ì—ëŠ” ë²—ì–´ë‚˜ì§€ë§Œ í”„ë¡œê·¸ë¨ ìƒì—ì„œëŠ” ë¬¸ì œê°€ ì—†ê¸° ë•Œë¬¸ì— í…ŒìŠ¤íŠ¸ ë©”ì„œë“œë¡œ ì¸ì‹í•˜ì§€ ëª»í•˜ê³  í…ŒìŠ¤íŠ¸ë¥¼ ìˆ˜í–‰í•˜ì§€ ì•ŠëŠ”ë‹¤.

#### 2. ëª…ëª… íŒ¨í„´ì„ ì˜ë„í•œ ê³³ì—ì„œë§Œ ì‚¬ìš©í•  ê±°ë¼ëŠ” ë³´ì¥ì´ ì—†ë‹¤.
ê°œë°œìëŠ” JUnit3ì˜ ëª…ëª… íŒ¨í„´ì¸ 'test'ë¥¼ ë©”ì„œë“œê°€ ì•„ë‹Œ í´ë˜ìŠ¤ì˜ ì´ë¦„ìœ¼ë¡œ ì§€ìŒìœ¼ë¡œì¨ í•´ë‹¹ í´ë˜ìŠ¤ì˜ ëª¨ë“  í…ŒìŠ¤íŠ¸ ë©”ì„œë“œê°€ ìˆ˜í–‰ë˜ê¸¸ ë°”ë„ ìˆ˜ ìˆë‹¤. í•˜ì§€ë§Œ JUnitì€ í´ë˜ìŠ¤ ì´ë¦„ì—ëŠ” ê´€ì‹¬ì´ ì—†ë‹¤. ë”°ë¼ì„œ ê°œë°œìê°€ ì˜ë„í•œ í…ŒìŠ¤íŠ¸ëŠ” ì „í˜€ ìˆ˜í–‰ë˜ì§€ ì•ŠëŠ”ë‹¤.

 

#### 3. ëª…ëª… íŒ¨í„´ì„ ì ìš©í•œ ìš”ì†Œë¥¼ ë§¤ê°œë³€ìˆ˜ë¡œ ì „ë‹¬í•  ë§ˆë•…í•œ ë°©ë²•ì´ ì—†ë‹¤.
íŠ¹ì • ì˜ˆì™¸ë¥¼ ë˜ì ¸ì•¼ ì„±ê³µí•˜ëŠ” í…ŒìŠ¤íŠ¸ê°€ ìˆì„ ë•Œ, ë©”ì„œë“œ ì´ë¦„ì— í¬í•¨ëœ ë¬¸ìì—´ë¡œ ì˜ˆì™¸ë¥¼ ì•Œë ¤ì£¼ëŠ” ë°©ë²•ì´ ìˆì§€ë§Œ ë³´ê¸° í‰í•  ë¿ ì•„ë‹ˆë¼ ì»´íŒŒì¼ëŸ¬ê°€ ë¬¸ìì—´ì´ ì˜ˆì™¸ ì´ë¦„ì¸ì§€ ì•Œ ë„ë¦¬ê°€ ì—†ë‹¤.

##### âš ï¸ í•˜ì§€ë§Œ ì• ë„ˆí…Œì´ì…˜ì„ ì‚¬ìš©í•˜ë©´ ìœ„ì˜ ë‹¨ì ì„ ëª¨ë‘ í•´ê²°í•  ìˆ˜ ìˆë‹¤.

### ë§ˆì»¤ ì• ë„ˆí…Œì´ì…˜
> ì•„ë¬´ ë§¤ê°œë³€ìˆ˜ ì—†ì´ ë‹¨ìˆœíˆ ëŒ€ìƒì— ë§ˆí‚¹í•˜ëŠ” ìš©ë„ë¡œ ì‚¬ìš©ë˜ëŠ” ì• ë„ˆí…Œì´ì…˜
#### ë§ˆì»¤ ì• ë„ˆí…Œì´ì…˜ íƒ€ì… ì„ ì–¸ ì˜ˆì‹œ
```java
/**
* í…ŒìŠ¤íŠ¸ ë©”ì„œë“œì„ì„ ì„ ì–¸í•˜ëŠ” ì• ë„ˆí…Œì´ì…˜ì´ë‹¤.
* ë§¤ê°œë³€ìˆ˜ ì—†ëŠ” ì •ì  ë©”ì„œë“œ ì „ìš©
*/
@Retention(RetentionPolicy.RUNTIME)
@Target(ElementType.METHOD)
public @interface Test{}
```
- ìœ„ ì˜ˆì œë¥¼ ë³´ë©´ ì• ë„ˆí…Œì´ì…˜ ì•ˆì— ë˜ ë‹¤ë¥¸ ì• ë„ˆí…Œì´ì…˜ì´ ë‹¬ë ¤ ìˆë‹¤.  
â¡ï¸ ì´ë¥¼ **ë©”íƒ€ ì—ë„ˆí…Œì´ì…˜**ì´ë¼ê³  í•œë‹¤.
ì¦‰ í”„ë¡œê·¸ë˜ë¨¸ê°€ Testì´ë¦„ì— ì˜¤íƒ€ë¥¼ ë‚´ê±°ë‚˜ ë©”ì„œë“œ ì„ ì–¸ ì™¸ì˜ í”„ë¡œê·¸ë¨ ìš”ì†Œì— ë‹¬ë©´ ì»´íŒŒì¼ ì˜¤ë¥˜ë¥¼ ë‚´ì¤€ë‹¤.
- ```@Retention(RetentionPolicy.RUNTIME)``` - ë³´ì¡´ ì •ì±…  
    - ```@Test```ê°€ ëŸ°íƒ€ì„ì—ë„ ìœ ì§€ë˜ì–´ì•¼ í•œë‹¤ëŠ” í‘œì‹œ  
- ```@Target(ElementType.METHOD)``` - ì ìš© ëŒ€ìƒ  
    - ```@Test```ê°€ ë°˜ë“œì‹œ ë©”ì„œë“œì— ì„ ì–¸ë˜ì–´ì•¼ í•œë‹¤ëŠ” í‘œì‹œ  

#### ë§ˆì»¤ ì—ë„ˆí…Œì´ì…˜ì„ ì‚¬ìš©í•œ ì˜ˆì‹œ
```java
public class Sample {
    @Test
    public static void m1() { }        // ì„±ê³µí•´ì•¼ í•œë‹¤.
    public static void m2() { }
    @Test public static void m3() {    // ì‹¤íŒ¨í•´ì•¼ í•œë‹¤.
        throw new RuntimeException("ì‹¤íŒ¨");
    }
    public static void m4() { }  // í…ŒìŠ¤íŠ¸ê°€ ì•„ë‹ˆë‹¤.
    @Test public void m5() { }   // ì˜ëª» ì‚¬ìš©í•œ ì˜ˆ: ì •ì  ë©”ì„œë“œê°€ ì•„ë‹ˆë‹¤.
    public static void m6() { }
    @Test public static void m7() {    // ì‹¤íŒ¨í•´ì•¼ í•œë‹¤.
        throw new RuntimeException("ì‹¤íŒ¨");
    }
    public static void m8() { }
}
```  
- ```@Test``` ì• ë„ˆí…Œì´ì…˜ì€ Sample í´ë˜ìŠ¤ì˜ ì˜ë¯¸ì— ì§ì ‘ì ì¸ ì˜í–¥ì„ ì£¼ì§€ ì•Šê³ , ë‹¨ì§€ ê´€ì‹¬ ìˆëŠ” í”„ë¡œê·¸ë¨ì—ê²Œ ì¶”ê°€ ì •ë³´ë¥¼ ì œê³µí•œë‹¤. ì¦‰ ëŒ€ìƒ ì½”ë“œì˜ ì˜ë¯¸ëŠ” ê·¸ëŒ€ë¡œ ë‘” ì±„ ê·¸ ì• ë„ˆí…Œì´ì…˜ì— ê´€ì‹¬ ìˆëŠ” ë„êµ¬ì—ì„œ íŠ¹ë³„í•œ ì²˜ë¦¬ë¥¼ í•  ê¸°íšŒë¥¼ ì£¼ëŠ” ê²ƒì´ë‹¤.

#### ë§ˆì»¤ ì—ë„ˆí…Œì´ì…˜ì„ ì²˜ë¦¬í•˜ëŠ” í”„ë¡œê·¸ë¨(39-3)
```java
import java.lang.reflect.*;

public class RunTests {
    public static void main(String[] args) throws Exception {
        int tests = 0;
        int passed = 0;
        Class<?> testClass = Class.forName(args[0]);
        for (Method m : testClass.getDeclaredMethods()) {
            if (m.isAnnotationPresent(Test.class)) {
                tests++;
                try {
                    m.invoke(null);
                    passed++;
                } catch (InvocationTargetException wrappedExc) {
                    Throwable exc = wrappedExc.getCause();
                    System.out.println(m + " ì‹¤íŒ¨: " + exc);
                } catch (Exception exc) {
                    System.out.println("ì˜ëª» ì‚¬ìš©í•œ @Test: " + m);
                }
            }
        }
        System.out.printf("ì„±ê³µ: %d, ì‹¤íŒ¨: %d%n",
                passed, tests - passed);
    }
}
```  
- ì´ í…ŒìŠ¤íŠ¸ ëŸ¬ë„ˆëŠ” ëª…ë ¹ì¤„ë¡œë¶€í„° ì™„ì „ ì •ê·œí™”ëœ í´ë˜ìŠ¤ ì´ë¦„ì„ ë°›ì•„, í´ë˜ìŠ¤ì—ì„œ ```@Test``` ì• ë„ˆí…Œì´ì…˜ì´ ë‹¬ë¦° ë©”ì„œë“œë¥¼ ì°¾ì•„ ì°¨ë¡€ë¡œ í˜¸ì¶œí•œë‹¤. ê·¸ë¦¬ê³  ì• ë„ˆí…Œì´ì…˜ì„ ì˜ëª» ì‚¬ìš©í•´ ì˜ˆì™¸ê°€ ë°œìƒí•œë‹¤ë©´ ì˜¤ë¥˜ ë©”ì„¸ì§€ë¥¼ ì¶œë ¥í•œë‹¤.  
  - ì—¬ê¸°ì„œ ì™„ì „ ì •ê·œí™”ëœ í´ë˜ìŠ¤ë€, ì˜ˆë¥¼ ë“¤ì–´ ```com.example.TestClass```ì—ì„œ "com.example"ëŠ” íŒ¨í‚¤ì§€ ì´ë¦„ì´ê³  "TestClass"ëŠ” í´ë˜ìŠ¤ ì´ë¦„ì¸ë° ì´ ë‘˜ì„ ëª¨ë‘ í¬í•¨ëœ ì •ê·œí™”ëœ í˜•íƒœì´ë‹¤.

### ë§¤ê°œë³€ìˆ˜ë¥¼ ë°›ëŠ” ì• ë„ˆí…Œì´ì…˜ íƒ€ì…
> ë§Œì•½ íŠ¹ì • ì˜ˆì™¸ë¥¼ ë˜ì ¸ì•¼ë§Œ ì„±ê³µí•˜ëŠ” í…ŒìŠ¤íŠ¸ë¥¼ ì§€ì›í•˜ë ¤ë©´, ë‹¤ìŒê³¼ ê°™ì€ ìƒˆë¡œìš´ ì• ë„ˆí…Œì´ì…˜ íƒ€ì…ì´ í•„ìš”í•˜ë‹¤.  
#### ë§¤ê°œë³€ìˆ˜ë¥¼ í•˜ë‚˜ë§Œ ë°›ëŠ” ì• ë„ˆí…Œì´ì…˜
```java
import java.lang.annotation.*;

/**
 * ëª…ì‹œí•œ ì˜ˆì™¸ë¥¼ ë˜ì ¸ì•¼ë§Œ ì„±ê³µí•˜ëŠ” í…ŒìŠ¤íŠ¸ ë©”ì„œë“œìš© ì• ë„ˆí…Œì´ì…˜
 */
@Retention(RetentionPolicy.RUNTIME)
@Target(ElementType.METHOD)
public @interface ExceptionTest {
    Class<? extends Throwable> value();  // ë§¤ê°œë³€ìˆ˜
}
```  
- ì´ ì• ë„ˆí…Œì´ì…˜ì˜ ë§¤ê°œë³€ìˆ˜ íƒ€ì…ì€ ```Class<? extends Throwable>``` ì´ë©°(í•œì •ì  íƒ€ì… í† í°), ì´ëŠ” "Throwableì„ í™•ì¥í•œ í´ë˜ìŠ¤ì˜ Class ê°ì²´ "ë¼ëŠ” ëœ»ì´ë‹¤. ë”°ë¼ì„œ ëª¨ë“  ì˜ˆì™¸ì™€ ì˜¤ë¥˜ íƒ€ì…ì„ ìˆ˜ìš©í•œë‹¤.

#### ë§¤ê°œë³€ìˆ˜ í•˜ë‚˜ì§œë¦¬ ì• ë„ˆí…Œì´ì…˜ì„ ì‚¬ìš©í•œ í”„ë¡œê·¸ë¨
```java
public class Sample2 {
    @ExceptionTest(ArithmeticException.class)
    public static void m1() {  // ì„±ê³µí•´ì•¼ í•œë‹¤.
        int i = 0;
        i = i / i;
    }
    @ExceptionTest(ArithmeticException.class)
    public static void m2() {  // ì‹¤íŒ¨í•´ì•¼ í•œë‹¤. (ë‹¤ë¥¸ ì˜ˆì™¸ ë°œìƒ)
        int[] a = new int[0];
        int i = a[1];
    }
    @ExceptionTest(ArithmeticException.class)
    public static void m3() { }  // ì‹¤íŒ¨í•´ì•¼ í•œë‹¤. (ì˜ˆì™¸ê°€ ë°œìƒí•˜ì§€ ì•ŠìŒ)
}
```  
#### 39-3 í…ŒìŠ¤íŠ¸ ë„êµ¬ ìˆ˜ì • ì½”ë“œ
```java
if (m.isAnnotationPresent(ExceptionTest.class)) {
                tests++;
         try {
               m.invoke(null);
               System.out.printf("í…ŒìŠ¤íŠ¸ %s ì‹¤íŒ¨: ì˜ˆì™¸ë¥¼ ë˜ì§€ì§€ ì•ŠìŒ%n", m);
         } catch (InvocationTargetException wrappedEx) {
               Throwable exc = wrappedEx.getCause();
               Class<? extends Throwable> excType =
               m.getAnnotation(ExceptionTest.class).value();
                if (excType.isInstance(exc)) {
                     passed++;
                } else {
                     System.out.printf(
                                "í…ŒìŠ¤íŠ¸ %s ì‹¤íŒ¨: ê¸°ëŒ€í•œ ì˜ˆì™¸ %s, ë°œìƒí•œ ì˜ˆì™¸ %s%n",
                                m, excType.getName(), exc);
                }
           } catch (Exception exc) {
                System.out.println("ì˜ëª» ì‚¬ìš©í•œ @ExceptionTest: " + m);
           }
}
```
ğŸ’¡ ì•ì˜ ì½”ë“œ(39-3)ì™€ í•œ ê°€ì§€ ì°¨ì´ë¼ë©´, ì´ ì½”ë“œëŠ” ì• ë„ˆí…Œì´ì…˜ ë§¤ê°œë³€ìˆ˜ì˜ ê°’ì„ ì¶”ì¶œí•˜ì—¬ í…ŒìŠ¤íŠ¸ ë©”ì„œë“œê°€ ì˜¬ë°”ë¥¸ ì˜ˆì™¸ë¥¼ ë˜ì§€ëŠ”ì§€ í™•ì¸í•˜ëŠ”ë° ì‚¬ìš©í•œë‹¤.  

#### ë§ˆì»¤ ì• ë„ˆí…Œì´ì…˜ê³¼ ë§¤ê°œë³€ìˆ˜ í•˜ë‚˜ì§œë¦¬ ì• ë„ˆíƒœì´ì…˜ì„ ì²˜ë¦¬í•˜ëŠ” í”„ë¡œê·¸ë¨
```java
 if (m.isAnnotationPresent(ExceptionTest.class)) {
                tests++;
                try {
                    m.invoke(null);
                    System.out.printf("í…ŒìŠ¤íŠ¸ %s ì‹¤íŒ¨: ì˜ˆì™¸ë¥¼ ë˜ì§€ì§€ ì•ŠìŒ%n", m);
                } catch (InvocationTargetException wrappedEx) {
                    Throwable exc = wrappedEx.getCause();
                    Class<? extends Throwable> excType =
                            m.getAnnotation(ExceptionTest.class).value();
                    if (excType.isInstance(exc)) {
                        passed++;
                    } else {
                        System.out.printf(
                                "í…ŒìŠ¤íŠ¸ %s ì‹¤íŒ¨: ê¸°ëŒ€í•œ ì˜ˆì™¸ %s, ë°œìƒí•œ ì˜ˆì™¸ %s%n",
                                m, excType.getName(), exc);
                    }
                } catch (Exception exc) {
                    System.out.println("ì˜ëª» ì‚¬ìš©í•œ @ExceptionTest: " + m);
                }
            }
```  
ì—¬ê¸°ì„œ ë” ë‚˜ì•„ê°€ ì˜ˆì™¸ë¥¼ ì—¬ëŸ¬ ê°œ ëª…ì‹œí•˜ê³  ê·¸ì¤‘ í•˜ë‚˜ê°€ ë°œìƒí•˜ë©´ ì„±ê³µí•˜ê²Œ ë§Œë“¤ ìˆ˜ë„ ìˆë‹¤. ê¸°ì¡´ ì• ë„ˆí…Œì´ì…˜ì— Class ê°ì²´ë¥¼ ì•„ë˜ì™€ ê°™ì´ ë°°ì—´ë¡œ ìˆ˜ì •í•´ë³´ì.  
#### ë°°ì—´ ë§¤ê°œë³€ìˆ˜ë¥¼ ë°›ëŠ” ì• ë„ˆí…Œì´ì…˜ íƒ€ì…
```java
@Retention(RetentionPolicy.RUNTIME)
@Target(ElementType.METHOD)
public @interface ExceptionTest {
    Class<? extends Exception>[] value();
}
```  
- ì›ì†Œê°€ ì—¬ëŸ¿ì¸ ë°°ì—´ì¼ ì§€ì •í•  ë•ŒëŠ” ë‹¤ìŒê³¼ ê°™ì´ ì›ì†Œë“¤ì„ ì¤‘ê´„í˜¸ë¡œ ê°ì‹¸ê³  ì‰¼í‘œë¡œ êµ¬ë¶„í•´ì£¼ê¸°ë§Œ í•˜ë©´ ëœë‹¤.  
#### ë°°ì—´ ë§¤ê°œë³€ìˆ˜ë¥¼ ë°›ëŠ” ì• ë„ˆí…Œì´ì…˜ì„ ì‚¬ìš©í•˜ëŠ” ì½”ë“œ
```java
@ExceptionTest({ IndexOutOfBoundsException.class,
                     NullPointerException.class })
public static void doublyBad() {   // ì„±ê³µí•´ì•¼ í•œë‹¤.
     List<String> list = new ArrayList<>();

     // ìë°” API ëª…ì„¸ì— ë”°ë¥´ë©´ ë‹¤ìŒ ë©”ì„œë“œëŠ” IndexOutOfBoundsExceptionì´ë‚˜
     // NullPointerExceptionì„ ë˜ì§ˆ ìˆ˜ ìˆë‹¤.
     list.addAll(5, null);
}

```
ë‹¤ìŒì€ ì´ ìƒˆë¡œìš´ @ExceptionTestë¥¼ ì§€ì›í•˜ë„ë¡ í…ŒìŠ¤íŠ¸ ëŸ¬ë„ˆë¥¼ ìˆ˜ì •í•œ ì½”ë“œì´ë‹¤. 
#### ë°°ì—´ ë§¤ê°œë³€ìˆ˜ë¥¼ ë°›ëŠ” ì• ë„ˆí…Œì´ì…˜ì„ ì²˜ë¦¬í•˜ëŠ” ì½”ë“œ
```java
if (m.isAnnotationPresent(ExceptionTest.class)) {
        tests++;
        try {
             m.invoke(null);
             System.out.printf("í…ŒìŠ¤íŠ¸ %s ì‹¤íŒ¨: ì˜ˆì™¸ë¥¼ ë˜ì§€ì§€ ì•ŠìŒ%n", m);
         } catch (Throwable wrappedExc) {
             Throwable exc = wrappedExc.getCause();
             int oldPassed = passed;
             Class<? extends Throwable>[] excTypes =
                     m.getAnnotation(ExceptionTest.class).value();
             for (Class<? extends Throwable> excType : excTypes) {
                 if (excType.isInstance(exc)) {
                       passed++;
                       break;
                 }
              }
              if (passed == oldPassed)
                  System.out.printf("í…ŒìŠ¤íŠ¸ %s ì‹¤íŒ¨: %s %n", m, exc);
              }
          }
 }
```  
- í•˜ì§€ë§Œ ìœ„ì˜ ì½”ë“œë¥¼ ë” ê°„ë‹¨í•˜ê²Œ ê°œì„ í•˜ê³  ì‹¶ë‹¤ë©´, ìë°” 8ì—ì„œëŠ” ì—¬ëŸ¬ê°œì˜ ê°’ì„ ë°›ëŠ” ì• ë„ˆí…Œì´ì…˜ì„, ë°°ì—´ ë§¤ê°œë³€ìˆ˜ë¥¼ ì‚¬ìš©í•˜ëŠ” ëŒ€ì‹  ```@Repeatable``` ë©”íƒ€ ì• ë„ˆí…Œì´ì…˜ì„ ë‹¤ëŠ” ë°©ì‹ì„ ì„ íƒí•˜ì—¬ ì½”ë“œ ê°€ë…ì„±ì„ ë†’ì¼ ìˆ˜ ìˆë‹¤.
- @Repeatableë¥¼ ë‹¨ ì• ë„ˆí…Œì´ì…˜ì€ í•˜ë‚˜ì˜ í”„ë¡œê·¸ë¨ ìš”ì†Œì— ì—¬ëŸ¬ë²ˆ ë‹¬ ìˆ˜ ìˆë‹¤.

ğŸ“Œ ì£¼ì˜ ì‚¬í•­
> 1) @Repeatableì„ ë‹¨ ì• ë„ˆí…Œì´ì…˜ì„ ë°˜í™˜í•˜ëŠ” 'ì»¨í…Œì´ë„ˆ ì• ë„ˆí…Œì´ì…˜'ì„ í•˜ë‚˜ ë” ì •ì˜í•˜ê³ , @Repeatableì— ì´ ì»¨í…Œì´ë„ˆ ì• ë„ˆí…Œì´ì…˜ì˜ class ê°ì²´ë¥¼ ë§¤ê°œë³€ìˆ˜ë¡œ ì „ë‹¬í•´ì•¼ í•œë‹¤.
> 2) ì»¨í…Œì´ë„ˆ ì• ë„ˆí…Œì´ì…˜ì€ ë‚´ë¶€ ì• ë„ˆí…Œì´ì…˜ íƒ€ì…ì˜ ë°°ì—´ì„ ë°˜í™˜í•˜ëŠ” value ë©”ì„œë“œë¥¼ ì •ì˜í•´ì•¼ í•œë‹¤.
> 3) ì»¨í…Œì´ë„ˆ ì• ë„ˆí…Œì´ì…˜ íƒ€ì…ì—ëŠ” ì ì ˆí•œ ë³´ì¡´ ì •ì±…(@Retention)ê³¼ ì ìš© ëŒ€ìƒ(@Target)ì„ ëª…ì‹œí•´ì•¼ í•œë‹¤.(ê·¸ë ‡ì§€ ì•Šìœ¼ë©´ ì»´íŒŒì¼ X)  

#### ë°˜ë³µ ê°€ëŠ¥í•œ ì• ë„ˆí…Œì´ì…˜ íƒ€ì…
```java
@Retention(RetentionPolicy.RUNTIME)
@Target(ElementType.METHOD)
@Repeatable(ExceptionTestContainer.class)  //ì»¨í…Œì´ë„ˆ ì• ë„ˆí…Œì´ì…˜ class ê°ì²´
public @interface ExceptionTest {
    Class<? extends Throwable> value();
}

//ì»¨í…Œì´ë„ˆ ì• ë„ˆí…Œì´ì…˜
@Retention(RetentionPolicy.RUNTIME)
@Target(ElementType.METHOD)
public @interface ExceptionTestContainer {
    ExceptionTest[] value();     // value ë©”ì„œë“œ ì •ì˜
}

```

#### ë°˜ë³µ ê°€ëŠ¥í•œ ì• ë„ˆí…Œì´ì…˜ì„ ë‘ ë²ˆ ë‹¨ ì½”ë“œ
```java
@ExceptionTest(IndexOutOfBoundsException.class)
@ExceptionTest(NullPointerException.class)
public static void doublyBad() {
      List<String> list = new ArrayList<>();

      // ìë°” API ëª…ì„¸ì— ë”°ë¥´ë©´ ë‹¤ìŒ ë©”ì„œë“œëŠ” IndexOutOfBoundsExceptionì´ë‚˜
        // NullPointerExceptionì„ ë˜ì§ˆ ìˆ˜ ìˆë‹¤.
      list.addAll(5, null);
 }
```  
- ë°˜ë³µ ê°€ëŠ¥ ì• í„°ë„¤ì´ì…˜ì€, ì²˜ë¦¬í•  ë•Œë„ ì£¼ì˜ ì‚¬í•­ì´ ì¡´ì¬í•œë‹¤. 
    - ì• ë„ˆí…Œì´ì…˜ì„ ì—¬ëŸ¬ê°œ ë‹¬ë©´ í•˜ë‚˜ë§Œ ë‹¬ì•˜ì„ ë•Œì™€ êµ¬ë¶„í•˜ê¸° ìœ„í•´ í•´ë‹¹ 'ì»¨í…Œì´ë„ˆ' ì• ë„ˆí…Œì´ì…˜ íƒ€ì…ì´ ì ìš©ë˜ê¸° ë•Œë¬¸ì— m isAnnotationPresent() ì—ì„œ ë‘˜ì„ ëª…í™•íˆ êµ¬ë¶„í•˜ê³  ìˆëŠ” ê²ƒì„ ë³¼ ìˆ˜ ìˆë‹¤.

    - í•˜ì§€ë§Œ, í•´ë‹¹ ë©”ì„œë“œë¡œ ë°˜ë³µ ê°€ëŠ¥ ì• ë„ˆí…Œì´ì…˜ì´ ë‹¬ë ¸ëŠ”ì§€ ê²€ì‚¬í•œë‹¤ë©´ ê²€ì‚¬ì— ì‹¤íŒ¨í•  ê²ƒì´ê³ (ì• ë„ˆí…Œì´ì…˜ì„ ì—¬ëŸ¬ ë²ˆ ë‹¨ ë©”ì„œë“œë“¤ì„ ë¬´ì‹œ) ì»¨í…Œì´ë„ˆ ì• ë„ˆí…Œì´ì…˜ì´ ë‹¬ë ¸ëŠ”ì§€ë§Œ ê²€ì‚¬í•˜ì—¬ë„ ë°˜ë³µ ê°€ëŠ¥ ì• ë„ˆí…Œì´ì…˜ì„ í•œë²ˆë§Œ ë‹¨ ë©”ì„œë“œë¥¼ ë¬´ì‹œí•˜ê³  ì§€ë‚˜ì¹˜ê¸° ë•Œë¬¸ì— ë‘˜ì„ ë”°ë¡œë”°ë¡œ í™•ì¸í•´ì•¼ í•œë‹¤.  

#### ë°˜ë³µ ê°€ëŠ¥ ì• ë„ˆí…Œì´ì…˜ ë‹¤ë£¨ê¸°
```java
if (m.isAnnotationPresent(ExceptionTest.class)
                    || m.isAnnotationPresent(ExceptionTestContainer.class)) {
        tests++;
        try {
             m.invoke(null);
             System.out.printf("í…ŒìŠ¤íŠ¸ %s ì‹¤íŒ¨: ì˜ˆì™¸ë¥¼ ë˜ì§€ì§€ ì•ŠìŒ%n", m);
        } catch (Throwable wrappedExc) {
             Throwable exc = wrappedExc.getCause();
             int oldPassed = passed;
             ExceptionTest[] excTests =
                       m.getAnnotationsByType(ExceptionTest.class);
             for (ExceptionTest excTest : excTests) {
                 if (excTest.value().isInstance(exc)) {
                     passed++;
                     break;
                 }
             }
             if (passed == oldPassed)
                 System.out.printf("í…ŒìŠ¤íŠ¸ %s ì‹¤íŒ¨: %s %n", m, exc);
            }
      }
}
```
- ì´ëŸ¬í•œ ë°©ë²•ì€ ì½”ë“œ ê°€ë…ì„±ì„ ë†’ì¼ ìˆ˜ ìˆì§€ë§Œ ì• ë„ˆí…Œì´ì…˜ì„ ì²˜ë¦¬í•˜ëŠ” ë¶€ë¶„ì˜ ì½”ë“œê°€ ëŠ˜ì–´ë‚˜ê³  ë³µì¡í•´ì„œ ì˜¤ë¥˜ê°€ ë°œìƒí•  í™•ë¥ ì´ ì»¤ì§„ë‹¤ëŠ” ê²ƒì„ ëª…ì‹¬í•˜ì. í•˜ì§€ë§Œ ì´ë²ˆ ì˜ˆì œëŠ” ì´ë¥¼ ê°ìˆ˜í•˜ë”ë¼ë„ ëª…ëª… íŒ¨í„´ë³´ë‹¤ ì• ë„ˆí…Œì´ì…˜ì´ ì¢‹ë‹¤ëŠ” ê²ƒì„ í™•ì‹¤íˆ ë³´ì—¬ì¤€ë‹¤.


### ê²°ë¡ 
> ì• ë„ˆí…Œì´ì…˜ìœ¼ë¡œ í•  ìˆ˜ ìˆëŠ” ì¼ì„ ëª…ëª… íŒ¨í„´ìœ¼ë¡œ ì²˜ë¦¬í•  ì´ìœ ëŠ” ì—†ìœ¼ë©°, ìë°” í”„ë¡œê·¸ë˜ë¨¸ë¼ë©´ ì˜ˆì™¸ ì—†ì´ ìë°”ê°€ ì œê³µí•˜ëŠ” ì• ë„ˆí…Œì´ì…˜ íƒ€ì…ë“¤ì€ ì‚¬ìš©í•´ì•¼ í•œë‹¤.

